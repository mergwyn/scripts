#!/bin/bash
pictureDir=/srv/media/Pictures
marker=/srv/media/.last_rotated
startDate=$(mktemp -s .rotate)
function finish {
  rm -rf "${startDate}"
}
trap finish EXIT

date > "${startDate}"
[[ -f ${marker} ]] && findArgs="-newer ${marker}"

find "${pictureDir}" ${findArgs} -type f -print -exec exiftran -aip {} \;
cp -p "${startDate}" "${marker}"
